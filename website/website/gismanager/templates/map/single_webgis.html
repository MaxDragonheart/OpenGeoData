{% extends 'gis_base.html' %}

{% load static %}

{% block webgis-script %}
<script type="text/javascript">

  var osm = new ol.layer.Tile({
    title: 'OSM',
    source: new ol.source.OSM(),
    zIndex: 0
  });
  map.addLayer(osm);

{% for wms in single_object.layers.all %}

  var wms{{ wms.pk }} = new ol.layer.Tile({
    title: '{{ wms.title }}',
    source: new ol.source.TileWMS({
      url: '{{ wms.wms_layer_path.complete_url_wms }}',
      params: {
        'LAYERS': '{{ wms.wms_layer_name }}',
        'STYLES': {% if wms.wms_layer_style %}'{{ wms.wms_layer_style }}'{% else %}null{% endif %},
      }
    }),
    minZoom: {{ wms.set_min_zoom }},
    maxZoom: {{ wms.set_max_zoom }},
    zIndex: {% if wms.set_index %}{{ wms.set_index }}{% else %}0{% endif %},
    opacity: {{ wms.set_opacity }}
  });
  // map.addLayer(wms{{ wms.pk }});
{% endfor %}

</script>

{#% block basemap %#}
  {#% include '../components/basemap/layers.html' %#}
{#% endblock basemap %#}

{% endblock webgis-script %}
